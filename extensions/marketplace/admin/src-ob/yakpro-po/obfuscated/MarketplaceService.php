<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2026-02-12 00:51:51              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 namespace MarketplaceAdmin; use Classes\DatabaseCache; use Utils\LogManager; class MarketplaceService { const CACHE_KEY_MODULES = "\155\x61\x72\153\145\x74\160\x6c\x61\x63\145\72\155\x6f\x64\x75\x6c\145\x73"; const CACHE_TTL_3_HOURS = 10800; private static $instance = null; private function __construct() { } public static function getInstance() { goto a0dfp; eKEqs: jMlRi: goto yR83S; a0dfp: if (!(self::$instance === null)) { goto jMlRi; } goto XZRkm; yR83S: return self::$instance; goto u7ERR; XZRkm: self::$instance = new self(); goto eKEqs; u7ERR: } public function getModules($forceRefresh = false) { goto VYxic; Q56q0: dkJ9M: goto PYD_e; SYMcV: $response = $this->makeRequest($url); goto C8Vda; N18SI: if (!(json_last_error() !== JSON_ERROR_NONE)) { goto dkJ9M; } goto yxUUT; yxUUT: LogManager::getInstance()->error("\115\141\162\153\145\164\160\x6c\141\x63\x65\x53\x65\x72\x76\x69\x63\145\72\40\x46\141\x69\154\145\x64\40\x74\x6f\x20\x70\141\x72\163\145\x20\112\x53\x4f\x4e\x20\x72\x65\x73\x70\x6f\x6e\163\145"); goto ibMPQ; VYxic: $cache = DatabaseCache::getInstance(); goto d9Iy2; ibMPQ: return null; goto Q56q0; NtX8j: $cached = $cache->get(self::CACHE_KEY_MODULES); goto VGetB; n9Os3: return $cached; goto GkZkC; GIB4Y: $url = APP_WEB_URL . "\57\163\x61\x70\x69\57\x6d\x6f\x64\165\154\x65\163"; goto SYMcV; d9Iy2: if ($forceRefresh) { goto Ce6vG; } goto NtX8j; MmGQz: $data = json_decode($response, true); goto N18SI; Q3kLL: Ce6vG: goto GIB4Y; kVKhx: BzKCc: goto MmGQz; pZMld: return null; goto kVKhx; PYD_e: $cache->set(self::CACHE_KEY_MODULES, $data, self::CACHE_TTL_3_HOURS); goto FMgtE; GkZkC: j4Uyv: goto Q3kLL; FMgtE: return $data; goto AkVvX; C8Vda: if (!($response === null)) { goto BzKCc; } goto pZMld; VGetB: if (!($cached !== null)) { goto j4Uyv; } goto n9Os3; AkVvX: } public function getModule($moduleId) { goto hpGQw; LGuSu: $response = $this->makeRequest($url); goto DR6cD; XuqWm: return null; goto Mx1_l; oRLqE: return null; goto IsyaZ; IsyaZ: SPlkP: goto kJFmo; kJFmo: return $data; goto zM648; pNaGg: if (!(json_last_error() !== JSON_ERROR_NONE)) { goto SPlkP; } goto PRKo2; DR6cD: if (!($response === null)) { goto aFKYx; } goto XuqWm; hpGQw: $url = APP_WEB_URL . "\163\141\160\151\x2f\155\157\144\x75\154\x65\x73\57" . urlencode($moduleId); goto LGuSu; Mx1_l: aFKYx: goto qaW6B; qaW6B: $data = json_decode($response, true); goto pNaGg; PRKo2: LogManager::getInstance()->error("\115\x61\x72\153\145\164\160\x6c\x61\x63\145\123\x65\162\166\x69\143\x65\72\x20\x46\141\151\x6c\x65\x64\x20\164\157\x20\160\141\x72\163\x65\40\x4a\x53\117\x4e\x20\x72\145\163\x70\157\x6e\x73\145\x20\146\x6f\x72\x20\x6d\157\144\x75\x6c\145\x3a\x20" . $moduleId); goto oRLqE; zM648: } private function makeRequest($url) { goto zbi1a; Q1_Fc: LogManager::getInstance()->error("\x4d\141\162\153\x65\x74\x70\x6c\141\143\145\123\x65\x72\166\x69\143\145\72\40\110\x54\x54\x50\x20\x65\162\x72\x6f\162\40" . $httpCode . "\x20\146\x6f\x72\40\x55\122\114\x3a\x20" . $url); goto MQJDZ; G9crF: $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); goto rzEwr; zbi1a: $ch = curl_init(); goto EEmNB; EEmNB: curl_setopt_array($ch, [CURLOPT_URL => $url, CURLOPT_RETURNTRANSFER => true, CURLOPT_TIMEOUT => 30, CURLOPT_CONNECTTIMEOUT => 10, CURLOPT_FOLLOWLOCATION => true, CURLOPT_MAXREDIRS => 3, CURLOPT_SSL_VERIFYPEER => false, CURLOPT_SSL_VERIFYHOST => false, CURLOPT_HTTPHEADER => ["\101\x63\143\x65\x70\164\x3a\x20\x61\x70\160\154\151\143\x61\164\151\157\156\57\x6a\x73\x6f\156", "\x43\x6f\x6e\x74\145\156\164\55\x54\x79\x70\145\72\40\141\x70\x70\154\x69\143\x61\x74\151\157\156\57\152\x73\x6f\x6e"]]); goto hNzWX; n3_0A: LogManager::getInstance()->error("\115\x61\x72\153\x65\164\x70\x6c\x61\x63\145\123\145\x72\166\151\143\x65\x3a\40\x63\125\122\x4c\x20\145\162\162\157\162\x20\55\40" . $error); goto rC3k1; ysyFH: QnMT_: goto OYcQ0; MQJDZ: return null; goto ysyFH; juSAG: if (!($httpCode < 200 || $httpCode >= 300)) { goto QnMT_; } goto Q1_Fc; KafQq: vzpXq: goto juSAG; rC3k1: return null; goto KafQq; OYcQ0: return $response; goto Sc5T3; hNzWX: $response = curl_exec($ch); goto G9crF; rzEwr: $error = curl_error($ch); goto fAIIh; wRE8b: if (!($response === false)) { goto vzpXq; } goto n3_0A; fAIIh: curl_close($ch); goto wRE8b; Sc5T3: } }
