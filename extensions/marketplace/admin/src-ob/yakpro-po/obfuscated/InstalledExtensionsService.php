<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2026-02-12 00:51:51              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 namespace MarketplaceAdmin; use Utils\LogManager; class InstalledExtensionsService { private static $instance = null; private function __construct() { } public static function getInstance() { goto n603Q; n603Q: if (!(self::$instance === null)) { goto uhNj_; } goto VMoA4; td0TP: uhNj_: goto tGs0N; VMoA4: self::$instance = new self(); goto td0TP; tGs0N: return self::$instance; goto AIhTc; AIhTc: } public function getInstalledExtensions() { goto ztFIG; ztFIG: $extensions = []; goto kdSDg; IDFIE: if (is_dir($extensionsPath)) { goto niLEa; } goto jhVV6; kdSDg: $extensionsPath = APP_BASE_PATH . "\x2e\56\x2f\145\170\x74\x65\x6e\x73\151\157\x6e\163\57"; goto IDFIE; NBCrm: return $extensions; goto OGxj1; LskAg: niLEa: goto YaYYz; FhqEw: StZXV: goto NBCrm; YaYYz: $dirs = scandir($extensionsPath); goto hSuvR; jhVV6: return $extensions; goto LskAg; hSuvR: foreach ($dirs as $dir) { goto jjBel; Z7IyO: NK_t4: goto Fn8zN; w1CoQ: goto noAE4; goto pBDsX; AZJsB: $groupJsonPath = $fullPath . "\x2f\x67\x72\x6f\x75\x70\x2e\x6a\163\157\x6e"; goto oqhxh; NLuO3: goto jIPBJ; goto kYpA6; W_Q8m: $groupData = $this->getGroupData($fullPath, $dir); goto FCyyG; pBDsX: skz3p: goto W_Q8m; ezPOA: $extensions[] = $extData; goto IWXpY; Bo7Zr: jIPBJ: goto XIR5o; sxZIX: o3Q0h: goto AZJsB; d4fIy: goto jIPBJ; goto sxZIX; tRGDP: $extData = $this->getExtensionData($fullPath, $dir); goto eKXTB; sMZVL: if (is_dir($fullPath)) { goto o3Q0h; } goto d4fIy; oqhxh: if (file_exists($groupJsonPath)) { goto skz3p; } goto wA47v; jjBel: if (!($dir === "\56" || $dir === "\x2e\56")) { goto vN0hk; } goto NLuO3; mm9Ks: wgECZ: goto w1CoQ; eKXTB: if (!$extData) { goto GTaVq; } goto ezPOA; FCyyG: if (!$groupData) { goto NK_t4; } goto BKsx0; kYpA6: vN0hk: goto DXtcE; wA47v: if (!(is_dir($fullPath . "\57\x61\x64\155\151\156") || is_dir($fullPath . "\57\x75\x73\145\162"))) { goto wgECZ; } goto tRGDP; BKsx0: $extensions[] = $groupData; goto Z7IyO; DXtcE: $fullPath = $extensionsPath . $dir; goto sMZVL; Fn8zN: noAE4: goto Bo7Zr; IWXpY: GTaVq: goto mm9Ks; XIR5o: } goto FhqEw; OGxj1: } private function getGroupData($groupPath, $groupName) { goto ImWXU; I30jR: $releaseDate = null; goto CEh3a; IySuM: $groupData = json_decode(file_get_contents($groupJsonPath), true); goto Dw54F; hfLFk: $version = $versionData["\166\x65\x72\x73\151\157\x6e"] ?? null; goto v5Bkf; ONHb8: F187E: goto D2J_u; ImWXU: $version = null; goto I30jR; Dw54F: if (!$groupData) { goto k5nBj; } goto OWbNf; DnY3b: if (!file_exists($versionPath)) { goto Z1IGW; } goto S9y8f; dX2te: $description = null; goto M4XKQ; M4XKQ: $extensionsList = []; goto Nk_xR; OWbNf: $label = $groupData["\x6c\141\x62\x65\x6c"] ?? $groupName; goto SmaUU; v5Bkf: $releaseDate = $versionData["\x72\145\x6c\145\141\163\x65\x44\x61\164\145"] ?? null; goto Y1cSn; URo3Z: return ["\156\x61\x6d\145" => $label, "\146\x6f\x6c\x64\145\162" => $groupName, "\166\x65\x72\x73\151\157\x6e" => $version, "\x72\145\x6c\x65\141\163\x65\x44\141\x74\x65" => $releaseDate, "\147\x72\x6f\165\x70" => null, "\160\x61\164\x68" => $groupName, "\151\163\107\162\157\x75\160" => true, "\x64\x65\163\x63\x72\151\160\x74\x69\157\156" => $description, "\x65\170\164\145\x6e\163\x69\157\156\163" => $extensionsList, "\x6c\151\x63\x65\x6e\x73\145\123\x74\141\164\x75\x73" => $licenseStatus["\163\x74\x61\164\x75\163"], "\x6c\x69\x63\145\x6e\x73\x65\x45\170\x70\x69\x72\171" => $licenseStatus["\x65\170\160\151\x72\171"], "\x6c\x69\143\145\156\163\145\113\x65\x79" => $licenseStatus["\154\151\143\x65\x6e\x73\x65\113\145\171"]]; goto yVnGR; jN1o8: $licenseStatus = $this->getLicenseStatus($groupName); goto URo3Z; Y1cSn: GMeEg: goto gxywn; GypbA: k5nBj: goto ONHb8; bE1Xc: if (!$versionData) { goto GMeEg; } goto hfLFk; Cy3Jd: $extensionsList = $groupData["\x65\x78\164\145\x6e\x73\151\157\156\x73"] ?? []; goto GypbA; D2J_u: $versionPath = $groupPath . "\x2f\x76\145\x72\163\x69\x6f\x6e\x2e\x6a\163\157\156"; goto DnY3b; SmaUU: $description = $groupData["\x64\x65\x73\143\x72\x69\160\164\151\x6f\x6e"] ?? null; goto Cy3Jd; S9y8f: $versionData = json_decode(file_get_contents($versionPath), true); goto bE1Xc; Nk_xR: $groupJsonPath = $groupPath . "\x2f\x67\x72\x6f\165\x70\x2e\152\163\x6f\x6e"; goto pf7a6; pf7a6: if (!file_exists($groupJsonPath)) { goto F187E; } goto IySuM; gxywn: Z1IGW: goto jN1o8; CEh3a: $label = $groupName; goto dX2te; yVnGR: } private function getExtensionData($extPath, $extName) { goto NAWQJ; RW33i: $licenseStatus = $this->getLicenseStatus($extName); goto EOigm; zKSiv: $versionPath = $extPath . "\57\x76\145\x72\163\x69\x6f\x6e\56\152\163\157\156"; goto bPa5g; OkIFM: if (!$versionData) { goto Myli4; } goto uolGi; EOigm: return ["\x6e\141\x6d\145" => $extName, "\x66\157\154\144\145\162" => $extName, "\166\145\x72\x73\x69\x6f\156" => $version, "\x72\145\x6c\145\x61\163\145\104\x61\164\145" => $releaseDate, "\147\162\157\x75\x70" => null, "\x70\141\164\150" => $extName, "\151\x73\107\x72\157\x75\160" => false, "\x6c\151\143\x65\x6e\163\x65\x53\164\141\164\x75\163" => $licenseStatus["\163\x74\141\x74\165\163"], "\x6c\x69\x63\145\x6e\163\145\x45\x78\x70\x69\162\171" => $licenseStatus["\145\170\x70\x69\x72\x79"], "\154\x69\143\x65\x6e\163\145\x4b\x65\171" => $licenseStatus["\x6c\x69\143\x65\x6e\163\145\113\x65\x79"]]; goto RlhQQ; uolGi: $version = $versionData["\x76\x65\x72\163\151\157\x6e"] ?? null; goto QLspT; SqQFQ: zNht8: goto RW33i; gfiRk: $versionData = json_decode(file_get_contents($versionPath), true); goto OkIFM; sSWQ0: $releaseDate = null; goto zKSiv; NAWQJ: $version = null; goto sSWQ0; QLspT: $releaseDate = $versionData["\x72\145\154\x65\141\x73\x65\x44\x61\x74\145"] ?? null; goto GrbnJ; GrbnJ: Myli4: goto SqQFQ; bPa5g: if (!file_exists($versionPath)) { goto zNht8; } goto gfiRk; RlhQQ: } private function getLicenseStatus($code) { goto g5v7z; f48wy: if (!($activeLicense !== null)) { goto TjwiC; } goto hwVEn; H_5An: return ["\163\x74\141\164\x75\163" => "\116\x6f\40\114\x69\x63\145\x6e\x73\x65", "\x65\170\160\151\162\171" => null, "\154\151\x63\x65\156\x73\145\113\x65\x79" => null]; goto W9rvY; ZW75W: return ["\163\x74\x61\164\165\163" => "\116\157\40\114\x69\x63\x65\156\x73\x65", "\x65\x78\160\x69\162\171" => null, "\154\x69\143\x65\x6e\163\145\113\145\x79" => null]; goto YCMAc; c31zU: TjwiC: goto yeRwi; PkEaj: KivhK: goto ZW75W; x8T3i: return $expiredLicense; goto PkEaj; epGFi: if (!(empty($extensions) || !is_array($extensions))) { goto Om1Xh; } goto H_5An; iiQWO: foreach ($extensions as $extension) { goto HSGNc; iaYLX: goto eQaPU; goto nZLjA; cleqx: $activeLicense = ["\x73\164\x61\164\165\x73" => "\101\x63\x74\151\166\145", "\145\170\160\x69\x72\x79" => $expiryDate, "\154\151\143\145\156\x73\145\113\x65\x79" => $licenseKey]; goto zV2kd; JPOTT: goto ujbw6; goto UT1_P; UT1_P: yt1bl: goto ubLuP; t3IuD: goto ujbw6; goto eRMSX; RR77M: $expiryDate = $extension["\x65\x78\x70\151\x72\x79\x5f\144\x61\164\145"] ?? null; goto O2og6; TC3jJ: OD4H0: goto iaYLX; ZSKL6: $isExpired = $extension["\x69\x73\x5f\145\170\x70\151\x72\x65\x64"] ?? true; goto RR77M; Lz2NN: if (!($directory !== $code)) { goto Whjhq; } goto t3IuD; O2og6: $licenseKey = $extension["\154\x69\x63\x65\156\x73\145\137\153\x65\171"] ?? null; goto mw2ET; LiNxe: eQaPU: goto Noq7K; eRMSX: Whjhq: goto ZSKL6; Noq7K: ujbw6: goto daqf9; HSGNc: if (is_array($extension)) { goto yt1bl; } goto JPOTT; nZLjA: Ru4pk: goto cleqx; mw2ET: if ($isExpired === false) { goto Ru4pk; } goto ygYAQ; zV2kd: goto ln3BF; goto LiNxe; ubLuP: $directory = $extension["\x64\151\x72\x65\x63\x74\157\162\171"] ?? ''; goto Lz2NN; y1nzc: $expiredLicense = ["\x73\x74\x61\164\x75\x73" => "\105\x78\160\151\162\145\144", "\x65\170\x70\151\x72\171" => $expiryDate, "\154\151\143\145\156\163\x65\x4b\145\x79" => $licenseKey]; goto TC3jJ; ygYAQ: if (!($expiredLicense === null)) { goto OD4H0; } goto y1nzc; daqf9: } goto CYIza; hwVEn: return $activeLicense; goto c31zU; W9rvY: Om1Xh: goto N3C_b; yeRwi: if (!($expiredLicense !== null)) { goto KivhK; } goto x8T3i; FExhx: $expiredLicense = null; goto iiQWO; g5v7z: $extensions = \Classes\BaseService::getInstance()->getSystemData(ExtensionData::SYSTEM_DATA_KEY_MY_EXTENSIONS); goto epGFi; CYIza: ln3BF: goto f48wy; N3C_b: $activeLicense = null; goto FExhx; YCMAc: } }
